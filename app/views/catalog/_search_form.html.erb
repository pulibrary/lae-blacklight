  <%= form_tag search_action_url, :method => :get, :class => 'search', :role => 'search' do %>
    <%= render_hash_as_hidden_fields(search_state.params_for_search().except(:q, :search_field, :qt, :page, :utf8)) %>

    <div class="input-group">
    <% unless search_fields.empty? %>

      <div class="input-group-btn search-panel">
        <label for="search_field" class="sr-only"><%= t('blacklight.search.form.search_field.label') %></label>
        <%= select_tag(:search_field, options_for_select(search_fields, h(params[:search_field])), :title => t('blacklight.search.form.search_field.title'), :class=>"search_field btn dropdown-toggle") %>
        <span class="sr-only"><%= t('blacklight.search.form.search_field.post_label') %></span>
        </div>
      <% end %>
        <label for="q" class="sr-only"><%= t('blacklight.search.form.search.label') %></label>
         <%= text_field_tag :q, params[:q], :placeholder => t('blacklight.search.form.search.placeholder'), :class => "search_q q form-control", :id => "q", :autofocus => should_autofocus_on_search_box? %>

        <span class="input-group-append search-button">
          <button type="submit" class="btn btn-primary search-btn" id="search">
            <span class="submit-search-text"><%=t('blacklight.search.form.submit')%></span>
            <span class="blacklight-icons blacklight-icon-search" aria-hidden="true"><!--?xml version="1.0"?-->
              <svg width="24" height="24" viewBox="0 0 24 24" aria-label="Search" role="img">
                <title>Search</title>
                <path fill="none" d="M0 0h24v24H0V0z"></path>
                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
              </svg>
            </span>
          </button>
        </span>
      </div>

  <% end %>
